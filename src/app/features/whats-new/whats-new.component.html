<div class="whats-new">
  <div class="whats-new__content">
    @for (item of allItems(); track isPost(item) ? item.slug : item.title; let isFirst = $first) {
      <ng-accordion
        [header]="item.title"
        [subtitle]="formatDate(item.date)"
        [initialState]="isFirst ? 'opened' : 'closed'"
      >
        @if (item.description) {
          <div class="whats-new__feature-content">
            <p class="whats-new__feature-description">
              {{ item.description }}
            </p>
            @if (isPost(item)) {
              <ng-button
                [label]="'Read Post'"
                [stylingMode]="'contained'"
                [size]="'default'"
                (clicked)="navigateToPost(item.slug)"
                class="whats-new__action-button"
              />
            } @else if (isContactFormFeature(item)) {
              <ng-button
                [label]="'Open Contact Form'"
                [stylingMode]="'contained'"
                [size]="'default'"
                (clicked)="openContactForm()"
                class="whats-new__action-button"
              />
            }
          </div>
        }
      </ng-accordion>
    }
  </div>
</div>
