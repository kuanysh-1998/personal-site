@if (postState$ | async; as state) {
<div class="post-detail">
  @if (state.post) {
  <app-reading-progress-bar />
  }
  <ng-link class="back-link" [link]="'/blog'" [text]="'â† Back to blog'" />

  @if (state.loading) {
  <article class="post-content">
    <header class="post-header">
      <ng-skeleton height="2rem" width="100%"></ng-skeleton>
      <ng-skeleton height="1rem" width="150px"></ng-skeleton>
    </header>
    <div class="post-body">
      <ng-skeleton height="1rem" width="100%"></ng-skeleton>
      <ng-skeleton height="1rem" width="100%"></ng-skeleton>
      <ng-skeleton height="1rem" width="80%"></ng-skeleton>
      <ng-skeleton height="1rem" width="100%"></ng-skeleton>
      <ng-skeleton height="1rem" width="90%"></ng-skeleton>
    </div>
  </article>
  } @else if (state.post) {
  <article class="post-content">
    <header class="post-header">
      <div class="post-header__top">
        <h3 class="post-title">{{ state.post.title }}</h3>
        <app-copy-link />
      </div>
      <div class="post-meta">
        <time class="post-date">{{ formatDate(state.post.date) }}</time>
        <span class="post-reading-time">{{ state.post.content | readingTime }}</span>
        @if (viewCount$ | async; as viewCount) {
        <span class="post-views">
          <ng-svg [icon]="eyeIcon" class="post-views__icon"></ng-svg>
          {{ viewCount }} {{ viewCount === 1 ? 'view' : 'views' }}
        </span>
        }
      </div>
    </header>
    <div class="post-body" ngCopyCode>
      <markdown [data]="state.post.content" lineNumbers></markdown>
    </div>
  </article>
  <app-share-post [postTitle]="state.post.title" [postUrl]="getCurrentUrl()" />
  <app-post-navigation [previousPost]="state.previousPost" [nextPost]="state.nextPost" />
  } @else {
  <div class="not-found">
    <h1>Post not found</h1>
    <p>The post you're looking for doesn't exist.</p>
  </div>
  }
</div>
}
